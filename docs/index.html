<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easily Encrypt and Decrypt Data Frame/Tibble Columns or Files using RSA Public/Private Keys  • encryptr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easily Encrypt and Decrypt Data Frame/Tibble Columns or Files using RSA Public/Private Keys ">
<meta property="og:description" content="It is important to ensure that sensitive data is protected. 
    This straightforward package is aimed at the end-user. 
    Strong RSA encryption using a public/private key pair is used to encrypt data frame or tibble columns.
    A public key can be shared to allow others to encrypt data to be sent to you. 
    This is particularly aimed a healthcare settings so patient data can be pseudonymised. ">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">encryptr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SurgicalInformatics/encryptr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    

<div id="encryptr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#encryptr" class="anchor"></a>encryptr <img src="reference/figures/encryptr_hex.png" align="right">
</h1></div>
<div id="easily-encrypt-and-decrypt-data-frametibble-columns-and-files-using-rsa-publicprivate-keys" class="section level2">
<h2 class="hasAnchor">
<a href="#easily-encrypt-and-decrypt-data-frametibble-columns-and-files-using-rsa-publicprivate-keys" class="anchor"></a>Easily encrypt and decrypt data frame/tibble columns and files using RSA public/private keys</h2>
<p>The <code>encryptr</code> package provides functions to simply encrypt and decrypt columns of data. It also includes functions to encrypt and decrypt files.</p>
<p>The motivation is around sensitive healthcare data, but the applications are wide. There are a number of packages providing similar functions. However, they tend to be complex and are not designed with <code>tidyverse</code> functions in mind. The package wraps <code>openssl</code> and is intended to be safe and straightforward for non-experts. Strong RSA (2048 bit) encryption using a public/private key pair is used.</p>
<p>It is designed to work in <a href="http://tidyverse.tidyverse.org/articles/manifesto.html">tidyverse</a> piped functions.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install <code>encryptr</code> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"SurgicalInformatics/encryptr"</span>)</a></code></pre></div>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<p>Documentation is maintained at <a href="https://encrypt-r.org">encrypt-r.org</a>.</p>
</div>
<div id="getting-started-encrypt-and-decrypt-data-frame-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started-encrypt-and-decrypt-data-frame-columns" class="anchor"></a>Getting started: encrypt and decrypt data frame columns</h2>
<p>The basis of RSA encryption is a public/private key pair and is the method used of many modern encryption applications. The public key can be shared and is used to encrypt the information.</p>
<p>The private key is sensitive and should not be shared. The private key requires a password to be set. This password should follow modern rules on password complexity. You know what you should do. If lost, it cannot be recovered.</p>
<div id="generate-keys" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-keys" class="anchor"></a>Generate keys</h3>
<p>The <code><a href="reference/genkeys.html">genkeys()</a></code> function generates a public and private key pair. A password is required to be set in the dialogue box for the private key. Two files are written to the active directory.</p>
<p>The default name for the private key is:</p>
<ul>
<li><code>id_rsa</code></li>
</ul>
<p>And for the public key name is generated by default:</p>
<ul>
<li><code>id_rsa.pub</code></li>
</ul>
<p>If the private key file is lost, nothing encrypted with the public key can be recovered. Keep this safe and secure. Do not share it without a lot of thought on the implications.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="reference/genkeys.html">genkeys</a></span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>Private key written with name <span class="st">'id_rsa'</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>Public key written with name <span class="st">'id_rsa.pub'</span></a></code></pre></div>
</div>
<div id="encrypt" class="section level3">
<h3 class="hasAnchor">
<a href="#encrypt" class="anchor"></a>Encrypt</h3>
<p>An example dataset containing the addresses general practioners (family doctors) in Scotland is included in the package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">data</span>(gp)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co"># A tibble: 1,212 x 12</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">   organisation_code name    address1 address2 address3 city  county postcode opendate   closedate  telephone practice_type</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st"> </span><span class="dv">1</span> S10002            MUIRHE… LIFF RO… MUIRHEAD <span class="ot">NA</span>       DUND… ANGUS  DD2 5NH  <span class="dv">1995-05-01</span> <span class="ot">NA</span>         <span class="dv">01382</span> 58…             <span class="dv">4</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"> <span class="dv">2</span> S10017            THE BL… CRIEFF … KING ST… <span class="ot">NA</span>       CRIE… PERTH… PH7 3SA  <span class="dv">1996-04-06</span> <span class="ot">NA</span>         <span class="dv">01764</span> 65…             <span class="dv">4</span></a></code></pre></div>
<p>Encrypting columns to a ciphertext is straightforward. An important principle is dropping sensitive data which is never going to be required.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">gp_encrypt =<span class="st"> </span>gp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(name, address1, address2, address3)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/encrypt.html">encrypt</a></span>(postcode, telephone)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">gp_encrypt </a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co"># A tibble: 1,212 x 10</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">   organisation_code name       address1      city  county postcode      opendate   closedate  telephone      practice_type</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="st"> </span><span class="dv">1</span> S10002            619057f99… 54c39b3fa200… DUND… ANGUS  796284eb46ca… <span class="dv">1995-05-01</span> <span class="ot">NA</span>         5fcc30b04e260…             <span class="dv">4</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"> <span class="dv">2</span> S10017            371aa33c3… a996d07a84d2… CRIE… PERTH… 639dfc076ae3… <span class="dv">1996-04-06</span> <span class="ot">NA</span>         715909615a6ae…             <span class="dv">4</span></a></code></pre></div>
</div>
<div id="decrypt" class="section level3">
<h3 class="hasAnchor">
<a href="#decrypt" class="anchor"></a>Decrypt</h3>
<p>Decryption requires the private key generated using <code><a href="reference/genkeys.html">genkeys()</a></code> and the password set at the time. The password and file are not replaceable so need to be kept safe and secure.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">gp_encrypt <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/decrypt.html">decrypt</a></span>(postcode, telephone)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co"># A tibble: 1,212 x 8</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">   organisation_code city        county     postcode opendate   closedate  telephone    practice_type</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st"> </span><span class="dv">1</span> S10002            DUNDEE      ANGUS      DD2 5NH  <span class="dv">1995-05-01</span> <span class="ot">NA</span>         <span class="dv">01382</span> <span class="dv">580264</span>             <span class="dv">4</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"> <span class="dv">2</span> S10017            CRIEFF      PERTHSHIRE PH7 3SA  <span class="dv">1996-04-06</span> <span class="ot">NA</span>         <span class="dv">01764</span> <span class="dv">652283</span>             <span class="dv">4</span></a></code></pre></div>
</div>
<div id="using-a-lookup-table" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-lookup-table" class="anchor"></a>Using a lookup table</h3>
<p>Rather than storing the ciphertext in the working dataframe, a lookup table can be used as an alternative. Using <code>lookup = TRUE</code> has the following effects:</p>
<ul>
<li>returns the dataframe / tibble with encrypted columns removed and a <code>key</code> column included;</li>
<li>returns the lookup table as an object in the R environment;</li>
<li>creates a lookup table <code>.csv</code> file in the active directory. file of the lookup</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">gp_encrypt =<span class="st"> </span>gp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(name, address1, address2, address3)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/encrypt.html">encrypt</a></span>(postcode, telephone, <span class="dt">lookup =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">Lookup table object created with name <span class="st">'lookup'</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">Lookup table written to file with name <span class="st">'lookup.csv'</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">gp_encrypt</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># A tibble: 1,212 x 7</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">     key organisation_code city        county     opendate   closedate  practice_type</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="st"> </span><span class="dv">1</span>     <span class="dv">1</span> S10002            DUNDEE      ANGUS      <span class="dv">1995-05-01</span> <span class="ot">NA</span>                     <span class="dv">4</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"> <span class="dv">2</span>     <span class="dv">2</span> S10017            CRIEFF      PERTHSHIRE <span class="dv">1996-04-06</span> <span class="ot">NA</span>                     <span class="dv">4</span></a></code></pre></div>
<p>The file creation can be turned off with <code>write_lookup = FALSE</code> and the name of the lookup can be changed with <code>lookup_name = "anyNameHere"</code>.</p>
<p>Decryption is performed by passing the lookup object or file to the <code><a href="reference/decrypt.html">decrypt()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">gp_encrypt <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/decrypt.html">decrypt</a></span>(postcode, telephone, <span class="dt">lookup_object =</span> lookup)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co"># A tibble: 1,212 x 8</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">   postcode telephone    organisation_code city        county     opendate   closedate  practice_type</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="st"> </span><span class="dv">1</span> DD2 5NH  <span class="dv">01382</span> <span class="dv">580264</span> S10002            DUNDEE      ANGUS      <span class="dv">1995-05-01</span> <span class="ot">NA</span>                     <span class="dv">4</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"> <span class="dv">2</span> PH7 3SA  <span class="dv">01764</span> <span class="dv">652283</span> S10017            CRIEFF      PERTHSHIRE <span class="dv">1996-04-06</span> <span class="ot">NA</span>                     <span class="dv">4</span></a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">gp_encrypt <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/decrypt.html">decrypt</a></span>(postcode, telephone, <span class="dt">lookup_path =</span> <span class="st">"lookup.csv"</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># A tibble: 1,212 x 8</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">   postcode telephone    organisation_code city        county     opendate   closedate  practice_type</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>date<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="st"> </span><span class="dv">1</span> DD2 5NH  <span class="dv">01382</span> <span class="dv">580264</span> S10002            DUNDEE      ANGUS      <span class="dv">1995-05-01</span> <span class="ot">NA</span>                     <span class="dv">4</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"> <span class="dv">2</span> PH7 3SA  <span class="dv">01764</span> <span class="dv">652283</span> S10017            CRIEFF      PERTHSHIRE <span class="dv">1996-04-06</span> <span class="ot">NA</span>                     <span class="dv">4</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"> </a></code></pre></div>
</div>
<div id="not-a-hash" class="section level3">
<h3 class="hasAnchor">
<a href="#not-a-hash" class="anchor"></a>Not a hash</h3>
<p>The ciphertext produced for a given input will change with each encryption. This is a feature of the RSA algorithm. Ciphertexts should not therefore be attempted to be matched between datasets encrypted using the same public key. This is a conscious decision given the risks associated with sharing the necessary details (a salt).</p>
</div>
</div>
<div id="getting-started-encrypt-and-decrypt-files" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started-encrypt-and-decrypt-files" class="anchor"></a>Getting started: encrypt and decrypt files</h2>
<p>Encryption and decryption with asymmetric keys is computationally expensive. This is how <code>encrypt</code> above works. This makes it easy for each piece of data in a data frame to be decrypted without compromise of the whole data frame. This works on the presumption that each cell contains less than 245 bytes of data.</p>
<p>File encryption requires a different approach as files are often larger in size. <code>encrypt_file</code> encrypts a file using a symmetric “session” key and the AES-256 cipher. This key is itself then encrypted using a public key generated using genkeys. In OpenSSL this combination is referred to as an envelope.</p>
<div id="generate-keys-1" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-keys-1" class="anchor"></a>Generate keys</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/genkeys.html">genkeys</a></span>()</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>Private key written with name <span class="st">'id_rsa'</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>Public key written with name <span class="st">'id_rsa.pub'</span></a></code></pre></div>
</div>
<div id="encrypt-file" class="section level3">
<h3 class="hasAnchor">
<a href="#encrypt-file" class="anchor"></a>Encrypt file</h3>
<p>To demonstrate, the included dataset is written as a .csv file.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">write.csv</span>(gp, <span class="st">"gp.csv"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="reference/encrypt_file.html">encrypt_file</a></span>(<span class="st">"gp.csv"</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>Encrypted file written with name <span class="st">'gp.csv.encryptr.bin'</span></a></code></pre></div>
<p>Check that the file can be decrypted prior to removing the original file from your system. Warning: it is strongly suggested that the original unencrypted data file is stored as a back-up in case unencryption is not possible, e.g., the private key file or password is lost</p>
<p>The <code>decrypt_file</code> function will not allow the original file to be overwritten, therefore use the option to specify a new name for the unencrypted file.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/decrypt_file.html">decrypt_file</a></span>(<span class="st">"gp.csv.encryptr.bin"</span>, <span class="dt">file_name =</span> <span class="st">"gp2.csv"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>Decrypted file written with name <span class="st">'gp2.csv'</span></a></code></pre></div>
</div>
</div>
<div id="providing-a-public-key" class="section level2">
<h2 class="hasAnchor">
<a href="#providing-a-public-key" class="anchor"></a>Providing a public key</h2>
<p>In collaborative projects where data may be pooled, a public key can be made available by you via a link to enable collaborators to encrypt sensitive data, e.g.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">gp_encrypt =<span class="st"> </span>gp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(name, address1, address2, address3)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/encrypt.html">encrypt</a></span>(postcode, telephone, <span class="dt">public_key_path =</span> <span class="st">"https://argonaut.is.ed.ac.uk/public/id_rsa.pub"</span>)</a></code></pre></div>
</div>
<div id="caution" class="section level2">
<h2 class="hasAnchor">
<a href="#caution" class="anchor"></a>Caution</h2>
<p>All confidential information must be treated with the utmost care. Data should never be carried on removable devices or portable computers. Data should never be sent by open email. Encrypting data provides some protection against disclosure. But particularly in healthcare, data often remains potentially disclosive (or only pseudonymised) even after encryption of identifiable variables. Treat it with great care and respect.</p>
</div>
</div>

  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=encryptr">https://​cloud.r-project.org/​package=encryptr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/SurgicalInformatics/encryptr">https://​github.com/​SurgicalInformatics/​encryptr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/SurgicalInformatics/encryptr/issues">https://​github.com/​SurgicalInformatics/​encryptr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Cameron Fairfield <br><small class="roles"> Author </small>  </li>
<li>Riinu Ots <br><small class="roles"> Author </small>  </li>
<li>Stephen Knight <br><small class="roles"> Author </small>  </li>
<li>Tom Drake <br><small class="roles"> Author </small>  </li>
<li>Ewen Harrison <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=encryptr"><img src="https://www.r-pkg.org/badges/version/encryptr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=encryptr"><img src="https://cranlogs.r-pkg.org/badges/encryptr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.com/SurgicalInformatics/encryptr"><img src="https://travis-ci.com/SurgicalInformatics/encryptr.svg?branch=master" alt="TravisCRAN_Status_Badge"></a></li>
<li><a href="https://codecov.io/github/surgicalinformatics/encryptr?branch=master"><img src="https://codecov.io/gh/surgicalinformatics/encryptr/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Cameron Fairfield, Riinu Ots, Stephen Knight, Tom Drake, Ewen Harrison.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
